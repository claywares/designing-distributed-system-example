# 边车模式 (Sidecar Pattern) 演示

## 概述

边车模式是将应用程序的辅助功能部署在单独的容器中，与主应用程序容器一起运行的设计模式。就像摩托车的边车一样，辅助容器为主容器提供支持功能。

## 架构图

```
┌─────────────────────────────────┐
│           Pod                   │
│  ┌─────────────┐ ┌─────────────┐│
│  │  Main App   │ │   Sidecar   ││
│  │  Container  │ │  Container  ││
│  │             │ │             ││
│  │ - 业务逻辑   │ │ - 日志收集   ││
│  │ - API服务   │ │ - 指标监控   ││
│  │             │ │ - 配置管理   ││
│  └─────────────┘ └─────────────┘│
└─────────────────────────────────┘
```

## 使用场景

1. **日志收集**: 边车容器收集主应用的日志并发送到中央日志系统
2. **监控和指标**: 收集应用指标并暴露给监控系统
3. **配置管理**: 动态更新配置文件
4. **安全代理**: SSL终端、认证授权
5. **数据同步**: 缓存更新、数据备份

## 优势

- **关注点分离**: 主应用专注业务逻辑，边车处理辅助功能
- **技术栈独立**: 不同容器可以使用不同的技术栈
- **可复用性**: 边车容器可以在多个应用间复用
- **独立升级**: 可以独立更新边车功能

## 本示例演示

- **主应用**: 一个简单的Python Flask Web服务
- **边车容器**: 日志收集和指标监控服务

## 运行方式

```bash
# 构建和启动
docker-compose up --build

# 测试主应用
curl http://localhost:5000/api/users

# 查看监控指标
curl http://localhost:8080/metrics

# 查看日志
docker-compose logs sidecar
```
